<template>
  <div class="editor editor-startup">
    <div class="eui card shadow-l2">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        data-name="Layer 1"
        viewBox="0 0 1139.17 654.54"
        class="welcome-img"
      >
        <circle cx="246.83" cy="521.76" r="59.24" fill="#f2f2f2" />
        <circle cx="256.46" cy="513.1" r="59.24" fill="#2196f3" />
        <path
          fill="#3f3d56"
          d="M304.17 447.54h733v2h-733zM683.8 18.65H423.61V13.3H305.65v5.36H44.41a17.6 17.6 0 0 0-17.6 17.6V392.5a17.6 17.6 0 0 0 17.6 17.6h639.38a17.6 17.6 0 0 0 17.6-17.6V36.25a17.6 17.6 0 0 0-17.6-17.6Z"
        />
        <path fill="#2196f3" d="M50.41 49.75H677.8v353.91H50.41z" />
        <circle cx="363.57" cy="33.67" r="6.43" fill="#2196f3" />
        <path d="M498.37 403.67H50.41V49.75l447.96 353.92z" opacity=".1" />
        <circle cx="148.57" cy="316.88" r="60.31" fill="#f2f2f2" />
        <path
          fill="#3f3d56"
          d="M509.95 240.62h58.61v12.25h-58.61zM439.1 145.28h200.31v5.25H439.1zM439.1 161.9h200.31v5.25H439.1zM439.1 178.52h200.31v5.25H439.1zM439.1 195.14h200.31v5.25H439.1zM439.1 211.76h200.31v5.25H439.1z"
        />
        <path fill="#f2f2f2" d="M614.92 56.93h24.49v24.49h-24.49z" />
        <path
          fill="#3f3d56"
          d="M650.78 92.8h-29.74V63.06h29.74Zm-28.45-1.3h27.16V64.35h-27.16ZM719 397.23h-61.22v-4.41a.87.87 0 0 0-.88-.87h-20.99a.87.87 0 0 0-.87.87v4.41H621.9v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.88-.87h-20.99a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.88-.87h-21a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41H442.6v-4.41a.87.87 0 0 0-.87-.87H277.28a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.88-.87h-21a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41h-13.12v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41H155.7v-4.41a.87.87 0 0 0-.88-.87h-20.99a.87.87 0 0 0-.87.87v4.41h-13.13v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41H83.97v-4.41a.87.87 0 0 0-.87-.87h-21a.87.87 0 0 0-.87.87v4.41H20.99a21 21 0 0 0-20.99 21v9.49a21 21 0 0 0 21 20.99h698a21 21 0 0 0 21-21v-9.49a21 21 0 0 0-21-20.99ZM163.17 354.54a76 76 0 1 1 76-76 76.09 76.09 0 0 1-76 76Zm0-150a74 74 0 1 0 74 74 74.08 74.08 0 0 0-74-74ZM586.17 32.54h255v2h-255zM406.17 560.54h733v2h-733zM192.67 652.54h255v2h-255z"
        />
        <path fill="#2196f3" d="M471 550h28v28h-28z" />
        <path
          fill="#3f3d56"
          d="M516 562h-34v-34h34Zm-32.52-1.48h31.04v-31.04h-31.04Z"
        />
        <path fill="#2196f3" d="M796 22h28v28h-28z" />
        <path
          fill="#3f3d56"
          d="M841 34h-34V0h34Zm-32.52-1.48h31.04V1.48h-31.04Z"
        />
        <path fill="#2196f3" d="M1078 550h28v28h-28z" />
        <path
          fill="#3f3d56"
          d="M1123 562h-34v-34h34Zm-32.52-1.48h31.04v-31.04h-31.04ZM1057.17 231.96h-2.38V166.8a37.71 37.71 0 0 0-37.71-37.72H879.03a37.71 37.71 0 0 0-37.72 37.72v357.48a37.71 37.71 0 0 0 37.72 37.71h138.05a37.71 37.71 0 0 0 37.71-37.71V278.34h2.38Z"
        />
        <path
          fill="#2196f3"
          d="M1046.76 169.01v356.96a28.17 28.17 0 0 1-28.16 28.17H879.88a28.17 28.17 0 0 1-28.16-28.17V169.01a28.16 28.16 0 0 1 28.16-28.16h16.83a13.38 13.38 0 0 0 12.4 18.43h79.08a13.38 13.38 0 0 0 12.4-18.43h18.01a28.16 28.16 0 0 1 28.16 28.16Z"
        />
        <path
          fill="#3f3d56"
          d="M928.58 376.22h41.32v12.25h-41.32zM878.62 280.87h141.24v5.25H878.62zM878.62 297.49h141.24v5.25H878.62zM878.62 314.11h141.24v5.25H878.62zM878.62 330.73h141.24v5.25H878.62zM878.62 347.35h141.24v5.25H878.62z"
        />
        <path fill="#f2f2f2" d="M929.68 211.18h24.49v24.49h-24.49z" />
        <path
          fill="#3f3d56"
          d="M939.06 217.3v29.74h29.74V217.3Zm28.45 28.45h-27.16V218.6h27.16Z"
        />
        <path
          d="M1046.76 487.85v38.12a28.17 28.17 0 0 1-28.16 28.17H879.88a28.17 28.17 0 0 1-28.16-28.17v-192.2l116.87 92.32 2 1.58 21.74 17.17 2.03 1.61Z"
          opacity=".1"
        />
        <circle cx="937.24" cy="498.71" r="43.87" fill="#f2f2f2" />
        <path
          fill="#3f3d56"
          d="M320.17 654.54a87 87 0 1 1 87-87 87.1 87.1 0 0 1-87 87Zm0-172a85 85 0 1 0 85 85 85.1 85.1 0 0 0-85-85ZM950.17 532.54a55 55 0 1 1 55-55 55.06 55.06 0 0 1-55 55Zm0-108a53 53 0 1 0 53 53 53.06 53.06 0 0 0-53-53Z"
        />
      </svg>
      <div class="title">{{ $t('editor.welcome') }}</div>
      <div class="buttons">
        <button class="eui button" @click="$router.push('/editor/new')">
          <svg style="width: 32px; height: 32px" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M12 12H14V10H16V12H18V14H16V16H14V14H12V12M22 8V18C22 19.11 21.11 20 20 20H4C2.89 20 2 19.11 2 18V6C2 4.89 2.89 4 4 4H10L12 6H20C21.11 6 22 6.89 22 8M20 8H4V18H20V8Z"
            />
          </svg>
          {{ $t('editor.createProject') }}
        </button>

        <button class="eui button" @click="openProject">
          <svg style="width: 32px; height: 32px" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z"
            />
          </svg>
          {{ $t('editor.openProject') }}
        </button>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
import { useEditorStore } from '@/store/editor';
import { useRouter } from 'vue-router';
import { defineComponent, watch } from 'vue';

export default defineComponent({
  name: 'EditorStartupScreen',

  setup() {
    const editor = useEditorStore();
    const router = useRouter();

    const openProject = async () => {
      await editor.loadProject();

      watch(
        () => editor.isOpen,
        async () => {
          router.push('/editor/list');
        }
      );
    };

    return {
      openProject,
    };
  },
});
</script>

<style lang="scss" scoped>
.editor-startup {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  height: 100%;
}

.card {
  height: 70%;
  width: 70%;
  padding: 32px;
  display: flex;
  flex-direction: column;
  justify-content: center;

  .welcome-img {
    margin-bottom: 36px;
  }

  .title {
    font-weight: bold;
    font-size: 26px;
    margin-bottom: 50px;
  }

  .buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
  }

  button {
    font-size: 22px;
    width: 40%;
    height: 65px;
  }
}
</style>
